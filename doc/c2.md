# C2 : Resources

A API disponibiliza 6 recursos principais: Restaurantes, Pratos, Clientes, Ingredientes, Entregas e Pedidos; cada um com as respetivas operações CRUD essenciais: post, get, put e delete.

## 1 - Restaurantes
Faz a gestão dos restaurantes do sistema.

**Estrutura do Recurso:**

```json
{
    "id": 38,
    "nome": "Asian Fusion",
    "morada": "Rua de São Pedro, 258",
    "telefone": "289333333",
    "especialidade": "Asiática",
    "tempo_medio_preparacao": 30,
    "taxa_entrega": "2.00",
    "pedido_minimo": "10.00",
    "ativo": 1
  }
```

**Operações CRUD:**

- GET /api/restaurantes -> listar todos os restaurantes
- GET /api/restaurantes/{id} -> listar restaurante pelo seu id
- GET /api/restaurantes/{id}/pratos -> listar pratos de um restaurante
- POST /api/restaurantes -> criar restaurante
- PUT /api/restaurantes/{id} -> atualizar informações do restaurante
- DELETE /api/restaurantes/{id} -> apagar restaurante pelo seu id

**Campos:**

- id (obrigatório, primary key)
- nome (obrigatório)
- morada (obrigatório)
- telefone
- especialidade
- tempo médio de preparação
- taxa de entrega
- (...)

## 2 - Pratos
Faz gestão dos pratos pedidos dos restaurantes.

**Estrutura do Recurso:**

```json
{
    "id": 46,
    "restaurante_id": 10,
    "nome": "Arroz de Marisco",
    "descricao": "Arroz com marisco fresco",
    "preco": "16.00",
    "tempo_preparacao": 20,
    "disponivel": 1,
    "vegetariano": 0,
    "vegan": 0,
    "sem_gluten": 0,
    "created_at": "2025-11-30T20:12:58.000Z",
    "updated_at": "2025-11-30T20:12:58.000Z",
    "restaurante_nome": "Seafood Palace"
  }
```

**Operações CRUD:**

- GET /api/pratos -> listar todos os pratos
- GET /api/pratos/{id} -> listar prato pelo seu id
- GET /api/pratos/{id}/ingredientes -> listar ingredientes de um prato
- POST /api/pratos -> criar prato
- POST /api/pratos/{id}/ingredientes -> adicionar ingrediente a um prato
- PUT /api/pratos/{id} -> atualizar informações do prato
- DELETE /api/pratos/{id} -> apagar prato pelo seu id
- DELETE /api/pratos/{id}/ingredientes -> remover ingrediente de um prato

**Campos:**

- restaurante_id (obrigatório) - Relação 1:n com restaurantes
- nome (obrigatório)
- preco (obrigatório)
- descricao, vegetariano, disponivel (opcionais)
- (...)

## 3 - Clientes
Faz gestão dos clientes do sistema.

**Estrutura do Recurso:**

```json
{
    "id": 42,
    "nome": "Nuno Guerreiro",
    "email": "nuno.guerreiro@email.pt",
    "telefone": "923456791",
    "ativo": 1,
    "num_pedidos": 1,
    "total_gasto": "19.50"
  }
```

**Operações CRUD:**

- GET /api/clientes -> listar todos os clientes
- GET /api/clientes/{id} -> listar cliente pelo seu id
- POST /api/clientes -> criar cliente
- PUT /api/clientes/{id} -> atualizar informações do cliente
- DELETE /api/clientes/{id} -> apagar cliente pelo seu id

**Campos:**

- nome (obrigatório)
- email (obrigatório, único)
- telefone (obrigatório)
- (...)

## 4 - Entregas
Faz gestão das entregas do sistema.

**Estrutura do Recurso:**

```json
{
    "id": 45,
    "cliente_id": 45,
    "restaurante_id": 5,
    "morada_entrega_id": 45,
    "estado": "entregue",
    "created_at": "2025-11-30T20:12:59.000Z",
    "updated_at": "2025-11-30T20:12:59.000Z"
  }
```

**Operações CRUD:**

- GET /api/entregas -> listar todas as entregas
- GET /api/entregas/{id} -> listar determinada entrega
- POST /api/entregas -> criar entrega
- PUT /api/entregas/{id} -> atualizar dados de uma entrega
- DELETE /api/entregas/{id} -> apagar entrega

**Campos:**

- cliente_id (obrigatório)
- restaurante_id (obrigatório)
- morada_entrega_id (obrigatório)
- estado (opcional: pendente, a_caminho, entregue, cancelada)
- (...)
   
## 5 - Ingredientes
Faz gestão dos ingredientes dos pratos do sistema.

**Estrutura do Recurso:**

```json
{
    "id": 12,
    "nome": "Abacate",
    "unidade": "g",
    "alergeno": 0,
    "created_at": "2025-11-30T20:12:59.000Z"
  }
```

**Operações CRUD:**

- GET /api/ingredientes -> listar todos os ingredientes
- GET /api/ingredientes/{id} -> listar ingrediente
- POST /api/ingredientes -> criar ingrediente
- PUT /api/ingredientes/{id} -> atualizar informação de determinado prato
- DELETE /api/ingredientes/{id} -> apagar determinado prato

**Campos:**

- nome (obrigatório, único)
- unidade (opcional: g, kg, ml, l, unidade, fatia - padrão: g)
- alergeno (opcional; boolean - padrão: false)
- (...)

## 6 - Pedidos
Faz gestão dos pedidos do sistema.

**Estrutura do Recurso:**

```json
{
    "id": 1,
    "cliente_id": 1,
    "restaurante_id": 1,
    "morada_entrega_id": 1,
    "codigo_pedido": "PED001",
    "subtotal": "19.00",
    "taxa_entrega": "2.50",
    "total": "21.50",
    "metodo_pagamento": "mbway",
    "estado": "entregue",
    "observacoes": "Sem cebola",
    "data_hora": "2025-11-30T20:12:58.000Z",
    "created_at": "2025-11-30T20:12:58.000Z",
    "updated_at": "2025-11-30T20:12:58.000Z",
    "cliente_nome": "João Silva",
    "restaurante_nome": "Pizzaria Bella Napoli"
  }
```

**Operações CRUD:**

- GET /api/pedidos -> listar todos os pedidos
- GET /api/pedidos/{id} -> listar determinado pedido
- POST /api/pedidos -> criar pedido
- PUT /api/pedidos/{id} -> atualizar informação de determinado pedido
- DELETE /api/pedidos/{id} -> apagar determinado pedido

**Campos:**

- cliente_id (obrigatório)
- restaurante_id (obrigatório)
- morada_entrega_id (obrigatório)
- metodo_pagamento (obrigatório: cartao, mbway, dinheiro, carteira)
- pratos (obrigatório) - Array de pratos do pedido
- estado, observacoes (opcionais)
- (...)

## Relação entre os Recursos

**Relações 1-n**
- **restaurantes -> pratos**: Um restaurante tem muitos pratos
- **restaurantes -> pedidos**: Um restaurante recebe muitos pedidos
- **restaurantes -> entregas**: Um restaurante faz muitas entregas
- **pratos -> pedidos**: Um prato pode estar em muitos pedidos
- **clientes -> pedidos**: Um cliente pode ter muitos pedidos

**Relação m-n**
- **pratos <-> ingredientes**: Um prato pode ter vários ingredientes e um ingrediente pode estar em vários pratos, através da tabela "pratos_ingredientes";
- **pedidos <-> pratos**: Um pedido pode ter vários pratos, um prato pode estar em vários pedidos, através da tabela "pedidos_pratos".

## Filtros HTTP

A API suporta filtros através de query parameters:

- GET /api/restaurantes?especialidade=Italiana - Filtrar por especialidade
- GET /api/pratos?restaurante_id=1 - Filtrar pratos por restaurante
- GET /api/pratos?vegetariano=true - Filtrar pratos vegetarianos
- GET /api/pedidos?estado=pendente - Filtrar pedidos por estado
- GET /api/ingredientes?alergeno=true - Filtrar ingredientes alergénios

---
[< Previous](c1.md) | [^ Main](../../../) | [Next >](c3.md)
:--- | :---: | ---: 
